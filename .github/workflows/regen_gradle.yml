name: Regenerate Gradle Files Only

on:
  workflow_dispatch:

jobs:
  regen:
    runs-on: ubuntu-latest
    steps:
      - name: ðŸ“¥ Checkout Repository
        uses: actions/checkout@v4

      - name: ðŸš€ Clone template android/ folder with .gradle files
        run: |
          rm -rf android
          git clone https://github.com/flutter/flutter_android_gradle_template.git temp_android
          mv temp_android/android ./android
          rm -rf temp_android

      - name: ðŸ“¦ Install Dependencies
        run: flutter pub get

      - name: âœ… Commit Updated Gradle Files
        run: |
          git config user.name "github-actions"
          git config user.email "actions@github.com"
          git add android
          git commit -m "Replaced android folder with .gradle-based template"
          git push
